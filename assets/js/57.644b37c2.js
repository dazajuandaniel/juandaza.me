(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{332:function(t,a,s){"use strict";s.r(a);var e=s(14),r=Object(e.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"databricks-concepts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#databricks-concepts"}},[t._v("#")]),t._v(" Databricks Concepts")]),t._v(" "),a("h2",{attrs:{id:"delta-table"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#delta-table"}},[t._v("#")]),t._v(" Delta Table")]),t._v(" "),a("p",[t._v("Delta lakes are composed of three main things:")]),t._v(" "),a("ol",[a("li",[t._v("Files written to object storage")]),t._v(" "),a("li",[t._v("Transaction Log")]),t._v(" "),a("li",[t._v("[Optional] Metastore reference")])]),t._v(" "),a("h3",{attrs:{id:"transaction-logs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transaction-logs"}},[t._v("#")]),t._v(" Transaction Logs")]),t._v(" "),a("p",[t._v("Transaction logs are ordered records of transactions performed on a delta table, it is the single source of truth for the table. Each transaction is "),a("code",[t._v("json")]),t._v(" file.")]),t._v(" "),a("p",[t._v("Operations are broken downt into one or more:")]),t._v(" "),a("ul",[a("li",[t._v("Add file")]),t._v(" "),a("li",[t._v("Remove file")]),t._v(" "),a("li",[t._v("Update metadata")]),t._v(" "),a("li",[t._v("and more...")])]),t._v(" "),a("p",[a("code",[t._v("DESCRIBE")]),t._v(" & "),a("code",[t._v("DESCRIBE HISTORY")]),t._v(" commands")]),t._v(" "),a("ul",[a("li",[a("code",[t._v("describe")]),t._v(" returns the metadata of a table")]),t._v(" "),a("li",[a("code",[t._v("describe history")]),t._v(" includes even more metadata - only available for delta tables queried using Databricks. History is kept for 30 days")])]),t._v(" "),a("h3",{attrs:{id:"time-travel"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#time-travel"}},[t._v("#")]),t._v(" Time Travel")]),t._v(" "),a("p",[t._v("Query an older snapshot")]),t._v(" "),a("div",{staticClass:"language-sql extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sql"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" events "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TIMESTAMP")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OF")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("timestamp_expression"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" events version "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OF")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("Using the Python API")]),t._v(" "),a("div",{staticClass:"language-python extra-class"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[t._v("df1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" spark"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delta"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("option"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"versionAsOf"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n           "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);