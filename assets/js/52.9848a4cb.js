(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{409:function(t,a,s){"use strict";s.r(a);var e=s(42),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"databricks-concepts"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#databricks-concepts"}},[t._v("#")]),t._v(" Databricks Concepts")]),t._v(" "),s("h2",{attrs:{id:"delta-table"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delta-table"}},[t._v("#")]),t._v(" Delta Table")]),t._v(" "),s("p",[t._v("Delta lakes are composed of three main things:")]),t._v(" "),s("ol",[s("li",[t._v("Files written to object storage")]),t._v(" "),s("li",[t._v("Transaction Log")]),t._v(" "),s("li",[t._v("[Optional] Metastore reference")])]),t._v(" "),s("h3",{attrs:{id:"transaction-logs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#transaction-logs"}},[t._v("#")]),t._v(" Transaction Logs")]),t._v(" "),s("p",[t._v("Transaction logs are ordered records of transactions performed on a delta table, it is the single source of truth for the table. Each transaction is "),s("code",[t._v("json")]),t._v(" file.")]),t._v(" "),s("p",[t._v("Operations are broken downt into one or more:")]),t._v(" "),s("ul",[s("li",[t._v("Add file")]),t._v(" "),s("li",[t._v("Remove file")]),t._v(" "),s("li",[t._v("Update metadata")]),t._v(" "),s("li",[t._v("and more...")])]),t._v(" "),s("p",[s("code",[t._v("DESCRIBE")]),t._v(" & "),s("code",[t._v("DESCRIBE HISTORY")]),t._v(" commands")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("describe")]),t._v(" returns the metadata of a table")]),t._v(" "),s("li",[s("code",[t._v("describe history")]),t._v(" includes even more metadata - only available for delta tables queried using Databricks. History is kept for 30 days")])]),t._v(" "),s("h3",{attrs:{id:"time-travel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#time-travel"}},[t._v("#")]),t._v(" Time Travel")]),t._v(" "),s("p",[t._v("Query an older snapshot")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" events "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("TIMESTAMP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("timestamp_expression"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("SELECT")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" events version "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("AS")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("OF")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),s("p",[t._v("Using the Python API")]),t._v(" "),s("div",{staticClass:"language-python extra-class"},[s("pre",{pre:!0,attrs:{class:"language-python"}},[s("code",[t._v("df1 "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("read"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("format")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"delta"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("option"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"versionAsOf"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \\\n           "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("load"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);